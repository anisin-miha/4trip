import type { Metadata } from "next";
import type { TourData } from "@/app/components/ru/TourPage";
import { createMeetingPoint } from "./helpers";
import { MovementType } from "./types";

const slug = "bulgakovskaya-moskva-po-sledam-mastera-i-margarita";
const heroImage = "/images/tours/moscow/bulgakov.jpg";
const price = 900;
const duration = "1,5–2 часа";
const groupSize = "до 25 человек";
const ageLimit = "12+";
const schedule = "по пятницам и субботам (вечерние экскурсии)";

const meetingPoint = createMeetingPoint({
  mapSrc: "https://www.google.com/maps?q=Маяковская+метро,+Москва&output=embed",
  type: "Пешеходная",
  timeSlots: ["19:00"],
  duration,
  address: "м. «Маяковская», памятник Маяковскому",
  endAddress:
    "Триумфальная площадь (ст. м. «Маяковская» или «Пушкинская» в пешей доступности)",
  groupSize,
  forWhom: ageLimit,
  language: "Русский",
  price: "от 900 ₽ с человека",
  note: "Гид будет в тематическом костюме или с табличкой “Булгаковская экскурсия”.",
  lat: 55.7697,
  lng: 37.5958,
});

export const metadata: Metadata = {
  title:
    "Булгаковская Москва: по следам «Мастера и Маргариты» — мистика и реальность",
  description:
    "1,5–2 часа по местам романа М.А. Булгакова: Патриаршие пруды, «нехорошая квартира», особняк Маргариты. Начало у м. «Маяковская», памятник Маяковскому.",
  keywords:
    "экскурсия Булгаков Москва, Мастер и Маргарита, Патриаршие пруды, нехорошая квартира, особняк Морозовой, Дом Грибоедова, Театр Сатиры",
  openGraph: {
    title: "Булгаковская Москва: по следам «Мастера и Маргариты» — 4-trip.ru",
    description:
      "Прогулка по булгаковским местам: Патриаршие пруды, нехорошая квартира, особняк Маргариты.",
    url: `https://4-trip.ru/ru/excursions/${slug}`,
    type: "article",
    images: [
      {
        url: `https://4-trip.ru${heroImage}`,
        width: 1200,
        height: 630,
        alt: "Булгаковская Москва",
      },
    ],
  },
  twitter: {
    card: "summary_large_image",
    title: "Булгаковская Москва: по следам «Мастера и Маргариты»",
    description: "Экскурсия по местам романа Булгакова.",
    images: [`https://4-trip.ru${heroImage}`],
  },
  alternates: {
    canonical: `https://4-trip.ru/ru/excursions/${slug}`,
  },
};

export const tour: TourData = {
  slug,
  title: "Булгаковская Москва: по следам «Мастера и Маргариты»",
  subtitle:
    "1,5–2 часа по местам романа М.А. Булгакова: Патриаршие пруды, «нехорошая квартира», особняк Маргариты. Начало у м. «Маяковская», памятник Маяковскому.",
  hero: {
    image: heroImage,
    description: "",
    badges: [duration, ageLimit, "По пятницам и субботам"],
  },
  price,
  duration,
  languages: meetingPoint.language ? [meetingPoint.language] : undefined,
  schedule,
  nextDates: [
    "2025-09-19",
    "2025-09-20",
    "2025-09-26",
    "2025-09-27",
    "2025-10-03",
    "2025-10-04",
  ],
  groupSize,
  ageLimit,
  visibility: false,
  movementType: MovementType.Pedestrian,
  expectations:
    "На нашей экскурсии мы перенесёмся в таинственные 1930-е годы и пройдём по булгаковским местам, где реальность переплетается с вымыслом.",
  longread: {
    title:
      "Москва в романе «Мастер и Маргарита» – полноправный герой, мистический и притягательный",
    tldr: [
      "Старт у памятника Маяковскому",
      "Маршрут включает Патриаршие пруды, нехорошую квартиру, особняк Морозовой",
      "1,5–2 часа мистической прогулки",
    ],
    paragraphs: [
      "Москва в романе «Мастер и Маргарита» – полноправный герой, мистический и притягательный. На нашей экскурсии мы перенесёмся в таинственные 1930-е годы и пройдём по булгаковским местам, где реальность переплетается с вымыслом. Патриаршие пруды станут отправной точкой мистической истории: именно здесь Булгаков поселил Воланда, и на скамейке у пруда мы вспомним, почему не стоит разговаривать с незнакомцами.",
      "Вы увидите легендарный дом №10 на Большой Садовой – ту самую «нехорошую квартиру», в которой разворачивались потусторонние события романа (сегодня в этом доме находится музей Булгакова). Почувствуем атмосферу этого места, где до сих пор фанаты оставляют надписи и ищут следы чёрного кота Бегемота.",
      "Далее нас ждут переулки старой Москвы, связанные с жизнью и творчеством Михаила Булгакова. Мы отыщем величественный особняк Зинаиды Морозовой на Спиридоновке – готический дворец, в который, по одной из версий, писатель «поселил» свою Маргариту. Гид расскажет, что объединяет судьбы Булгакова и других известных москвичей той эпохи – например, покажет особняк Рябушинского (дом, где жил Максим Горький по приглашению Сталина) и вспомнит поэта В. Маяковского, чей памятник стоит рядом с местом нашей встречи.",
      "Мы заглянем к зданию на Тверском бульваре, известному как Дом Грибоедова – когда-то это был литературный клуб, а в романе здесь заседал вымышленный МАССОЛИТ, чьи критики не приняли творение Мастера. Напоследок увидим здание Московского театра Сатиры на Триумфальной площади – именно его Булгаков вывел в романе под именем театра Варьете, откуда на алчных москвичей посыпались «магические червонцы».",
      "По ходу прогулки вы услышите множество занимательных фактов о Москве 1930-х годов, о самом Михаиле Афанасьевиче Булгакове – его жизни, окружении, цензуре и творческих замыслах. Экскурсия поможет по-новому взглянуть на любимый роман. Вы увидите реальную Москву Булгакова во всей ее мистической красе и, возможно, тоже поверите, что «рукописи не горят»!",
    ],
  },
  inclusions: [
    "Услуги гида-историка",
    "Раздаточные материалы: отрывки из романа, иллюстрации (для погружения в сюжет)",
    "Небольшой сувенир на память (закладка с цитатой из романа)",
  ],
  exclusions: [
    "Посещение музеев по маршруту (мы осматриваем локации снаружи)",
    "Личные расходы (например, кофе в булгаковском кафе при музее)",
  ],
  details: [
    "Длительность: 1 час 30 мин – 2 часа",
    "Расписание: вечерами по пятницам и субботам (начало около 19:00)",
    "Размер группы: до 25 человек",
    "Возраст: 12+ (экскурсия ориентирована на взрослых и подростков)",
  ],
  meetingPoint,
  attractions: [
    {
      image: "/images/tours/moscow/patriarshie-prudy.jpg",
      alt: "Патриаршие пруды",
      title: "Патриаршие пруды",
      description: [
        "Тихий уголок в центре Москвы, знаменитый благодаря началу романа «Мастер и Маргарита».",
        "Несмотря на название «пруды», сейчас здесь остался один пруд – его зеленые воды и скамейки вокруг узнаёт каждый поклонник Булгакова. Именно на Патриарших появился таинственный Воланд и предсказал невероятную судьбу Берлиозу. Мы прогуляемся вдоль пруда, представим сцену знакомства героя с «иностранцем» и узнаем, откуда взялось название этих прудов и почему их несколько, хотя фактически пруд один (историческая загадка района).",
      ],
    },
    {
      image: "/images/tours/moscow/nehoroshaya-kvartira.jpg",
      alt: "«Нехорошая квартира» (Большая Садовая, 10)",
      title: "«Нехорошая квартира» (Большая Садовая, 10)",
      description: [
        "Знаменитый доходный дом начала XX века, где писатель М.А. Булгаков жил в 1920-е годы и где происходит действие многих глав романа.",
        "Квартира №50 прославилась как «нехорошая» – по сюжету именно в ней поселился Воланд со своей свитой. Сегодня здесь работает Музей Булгакова, а подъезд дома покрыт надписями поклонников. Мы увидим этот легендарный подъезд, узнаем реальные истории жильцов дома (Булгаков не случайно наделил квартиру дурной славой) и почувствуем атмосферу московской коммуналки 30-х годов.",
      ],
    },
    {
      image: "/images/tours/moscow/osobnyak-margarita.jpg",
      alt: "Особняк Маргариты (Дом Зинаиды Морозовой)",
      title: "Особняк Маргариты (Дом Зинаиды Морозовой)",
      description: [
        "Роскошный особняк на Спиридоновке, построенный в 1890-е годы по проекту архитектора Фёдора Шехтеля для миллионерши Зинаиды Морозовой.",
        "Неоготический замок с башенками и стрельчатыми окнами резко выделяется на фоне московской застройки. По одной из версий, Булгаков «поселил» героиню Маргариту именно в этом доме – уж очень он подходит королеве бала сатаны. Мы полюбуемся внешним обликом особняка, поговорим о его обитателях (от царских времён до советской эпохи) и узнаем, почему этот дом называли одним из самых красивых в Москве.",
      ],
    },
    {
      image: "/images/tours/moscow/teatr-varyete.jpg",
      alt: "Театр Варьете (Московский театр Сатиры)",
      title: "Театр Варьете (Московский театр Сатиры)",
      description: [
        "Здание с круглым куполом на Триумфальной площади – сегодня здесь Театр сатиры, а в булгаковском романе под вымышленным названием «Варьете» именно тут Воланд давал свой сеанс «чёрной магии».",
        "На сцене этого театра мистификатор фокусник сжигал денежные купюры, а затем сыпал их в зал – к восторгу публики, которая, впрочем, потом оказалась обманута. Мы увидим вход в театр, откуда выбегал конферансье Бенгальский, представим сцену со счастливыми рублёвками, летящими с балкона, и узнаем, что Булгаков имел в виду, описывая этот эпизод. Вы также услышите, как сложилась дальнейшая судьба театра и какие тайны хранят его подмостки.",
      ],
    },
  ],
  routeVariants: [
    {
      id: "classic",
      title: "Классический маршрут",
      points: [
        "М. «Маяковская» (памятник Маяковскому) – встреча группы, вводная о Булгакове и Москве 1930-х.",
        "Патриаршие пруды – место встречи Берлиоза и Воланда; скамейка, пруд (единственный оставшийся из «прудов»).",
        "Большая Садовая, 10 – знаменитая «нехорошая квартира» №50, дом-музей М.А. Булгакова.",
        "Спиридоновка, 17 (особняк Морозовой) – роскошный особняк в неоготическом стиле, прототип дома Маргариты.",
        "Тверской бульвар (Дом Герцена) – здание, известное как литературный Дом Герцена, прообраз «Дома Грибоедова» (МАССОЛИТ).",
        "Триумфальная пл. (Театр Сатиры) – современный Театр сатиры, в романе – театр Варьете Воланда.",
        "Финиш: Триумфальная площадь (ст. м. «Маяковская» или «Пушкинская» в пешей доступности).",
      ],
    },
  ],
  mapPoints: [
    { title: "м. «Маяковская»", lat: 55.7697, lng: 37.5958 },
    { title: "Патриаршие пруды", lat: 55.7642, lng: 37.5928 },
    { title: "Большая Садовая, 10", lat: 55.7657, lng: 37.5953 },
    { title: "Спиридоновка, 17", lat: 55.7639, lng: 37.5844 },
    { title: "Тверской бульвар", lat: 55.7578, lng: 37.6022 },
    { title: "Триумфальная пл.", lat: 55.7697, lng: 37.5958 },
  ],
  learnMore: [
    {
      title: "Где делать фото",
      text: "У Патриарших прудов, подъезда нехорошей квартиры, особняка Морозовой.",
    },
    {
      title: "Лучшие виды",
      text: "Панорама пруда и готический особняк.",
    },
    {
      title: "Как ориентироваться потом",
      text: "Метро «Маяковская» или «Пушкинская».",
    },
    {
      title: "Подача без перегруза",
      text: "Мистические истории и факты о Булгакове.",
    },
  ],
  gallery: [
    {
      src: "/images/tours/moscow/bulgakov-gallery/1.jpg",
      alt: "Патриаршие пруды",
    },
    {
      src: "/images/tours/moscow/bulgakov-gallery/2.jpg",
      alt: "Нехорошая квартира",
    },
    {
      src: "/images/tours/moscow/bulgakov-gallery/3.jpg",
      alt: "Особняк Маргариты",
    },
    { src: "/images/tours/moscow/bulgakov-gallery/4.jpg", alt: "Театр Сатиры" },
  ],
  faq: [
    {
      question: "Экскурсия проводится только в тёмное время суток?",
      answer:
        "Мы рекомендуем вечернее время – при наступлении сумерек атмосфера булгаковской Москвы ощущается острее. Однако по запросу возможна дневная прогулка.",
    },
    {
      question:
        "Можно ли заходить внутрь «нехорошей квартиры» или музея Булгакова?",
      answer:
        "Наш маршрут рассчитан как внешняя прогулка, в музей мы не заходим (это отнимает много времени). Однако экскурсовод покажет вход и расскажет, что внутри. При желании вы можете самостоятельно посетить музей Булгакова до или после экскурсии (он находится как раз на маршруте).",
    },
    {
      question: "Экскурсия подходит детям?",
      answer:
        "Экскурсия рассчитана на взрослых и подростков, знакомых с булгаковским романом. Маленьким детям может быть неинтересно или непонятно. Мы устанавливаем рекомендованный возраст 12+, но это не строгий запрет – вы знаете своего ребёнка лучше. Имейте в виду, что некоторые истории связаны с мистикой и сатирой, однако ничего откровенно пугающего не будет.",
    },
    {
      question: "Если пойдёт дождь, экскурсия состоится?",
      answer:
        "Да, дождь не помешает встрече с Воландом 😉. Возьмите зонтик или дождевик – маршрут пешеходный, укрыться будет негде. В сильный дождь гид может изменить порядок объектов (например, сократить время у Патриаршего пруда), но основная программа будет выполнена.",
    },
    {
      question: "Можно ли фотографировать?",
      answer:
        "Конечно! На Патриарших прудах и во дворах можно свободно фотографировать. У музея Булгакова и у особняка Морозовой разрешена съемка снаружи. Если будете заходить в музей позже, внутри без вспышки тоже можно. Делитесь своими снимками с хэштегом #булгаковскаяМосква и вдохновляйте других прочитать роман.",
    },
  ],
};

export const tourWithMeta: TourData & {
  metadata: Metadata;
} = {
  ...tour,
  metadata,
};

export const card = {
  href: `/excursions/${slug}`,
  imageSrc: heroImage,
  imageAlt: "Булгаковская Москва: по следам «Мастера и Маргариты»",
  hero: {
    image: heroImage,
    description: "Булгаковская Москва",
  },
  title: "Булгаковская Москва: по следам «Мастера и Маргариты»",
  description:
    "1,5–2 часа по местам романа: Патриаршие пруды, нехорошая квартира, особняк Маргариты.",
  price: tour.price,
  duration: tour.duration,
  languages: meetingPoint.language ? [meetingPoint.language] : undefined,
  city: "Москва",
  meetingPoint: tour.meetingPoint.address,
  rating: tour.rating,
};
